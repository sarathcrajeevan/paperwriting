"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.updateVariant = void 0;
var builders_1 = require("../../types/builders");
exports.updateVariant = function(tags, sourceSchemaType, selectedVariant) {
    if (tags === void 0) {
        tags = [];
    }
    if (!sourceSchemaType) {
        return tags;
    }
    var isVariantDisabled;
    var filteredTags = tags.filter(function(existingTag) {
        var _a;
        if (((_a = existingTag.meta) === null || _a === void 0 ? void 0 : _a.schemaType) === sourceSchemaType) {
            isVariantDisabled = existingTag.disabled;
            return !!existingTag.children;
        }
        return true;
    });
    if (!selectedVariant) {
        return filteredTags;
    }
    if (sourceSchemaType === selectedVariant) {
        return isVariantDisabled ?
            filteredTags.concat(builders_1.buildStructuredData({
                schemaType: sourceSchemaType,
                disabled: isVariantDisabled,
            })) :
            [];
    }
    return filteredTags.concat(builders_1.buildStructuredData({
        schemaType: sourceSchemaType,
        selectedVariant: selectedVariant,
        disabled: isVariantDisabled,
    }));
};