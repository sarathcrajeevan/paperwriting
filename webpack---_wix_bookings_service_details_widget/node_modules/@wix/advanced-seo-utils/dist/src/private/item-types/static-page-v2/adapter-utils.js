"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getPageUrl = void 0;
var ContextProps_1 = require("../../types/ContextProps");
var get_1 = require("../../utils/get");
var index_1 = require("../../converters/index");
var removeTrailingSlash = function(url) {
    return url.replace(/\/+$/, '');
};
exports.getPageUrl = function(item) {
    if (item === void 0) {
        item = {};
    }
    var siteUrl = get_1.get(item, "context." + ContextProps_1.CONTEXT_PROPS.SITE_URL);
    var defaultUrl = get_1.get(item, "context." + ContextProps_1.CONTEXT_PROPS.DEFAULT_URL);
    var isHomePage = get_1.getRawValue(item, "context." + ContextProps_1.CONTEXT_PROPS.IS_HOME_PAGE);
    var urlWithoutQuery = defaultUrl.split('?')[0];
    var isCurrentHomePage = removeTrailingSlash(urlWithoutQuery) === removeTrailingSlash(siteUrl);
    var url = isHomePage && !isCurrentHomePage ? siteUrl : defaultUrl;
    return index_1.sanitizeUrl(url);
};