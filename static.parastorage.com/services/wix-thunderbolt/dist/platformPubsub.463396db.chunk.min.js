(self.webpackJsonp__wix_thunderbolt_app = self.webpackJsonp__wix_thunderbolt_app || []).push([
    [7607], {
        70846: function(e, n, t) {
            "use strict";
            t.r(n), t.d(n, {
                PlatformPubsubSymbol: function() {
                    return i.H
                },
                TPA_PUB_SUB_PREFIX: function() {
                    return r.$E
                },
                editorPage: function() {
                    return l
                },
                name: function() {
                    return i.u
                },
                page: function() {
                    return f
                },
                stripPubSubPrefix: function() {
                    return r.$H
                }
            });
            var r = t(12073),
                i = t(21568),
                s = t(5096),
                u = t(59032),
                a = t(43757),
                c = (0, a.ff)([i.H], (function(e) {
                    return {
                        getSdkHandlers: function() {
                            return {
                                publish: function(n, t, r, i) {
                                    e.publish(n, "worker", {
                                        eventKey: t,
                                        isPersistent: i,
                                        eventData: r
                                    })
                                },
                                subscribe: function(n, t, r, i) {
                                    e.subscribe(n, "worker", {
                                        eventKey: t,
                                        isPersistent: i
                                    }, r)
                                },
                                unsubscribe: function(n, t) {
                                    e.unsubscribe(n, "worker", t)
                                }
                            }
                        }
                    }
                })),
                o = (0, a.ff)([i.H], (function(e) {
                    return {
                        pageWillUnmount: function() {
                            e.clearListenersBesideStubs()
                        }
                    }
                })),
                f = function(e) {
                    e(i.H).to(r.Xr), e(s.CT).to(c), e(u.j.PageWillUnmountHandler).to(o)
                },
                l = f
        },
        12073: function(e, n, t) {
            "use strict";
            t.d(n, {
                $E: function() {
                    return c
                },
                $H: function() {
                    return o
                },
                Xr: function() {
                    return f
                }
            });
            var r = t(31191),
                i = t(43757),
                s = t(5096),
                u = t(98118),
                a = {},
                c = "TPA_PUB_SUB_";

            function o(e) {
                var n = new RegExp("^" + c);
                return e.replace(n, "")
            }
            var f = (0, i.ff)([s.ZQ, u.ku], (function(e, n) {
                function t(e, n) {
                    var t, r = {
                        persistentData: [],
                        listeners: {}
                    };
                    return a[e] ? a[e][n] || (a[e][n] = r) : a[e] = ((t = {})[n] = r, t), a[e][n]
                }

                function i(e) {
                    Object.keys(a).forEach((function(n) {
                        Object.keys(a[n]).forEach((function(i) {
                            var s = t(n, i);
                            Object.entries(s.listeners).forEach((function(n) {
                                var t = (0, r.CR)(n, 2),
                                    i = t[0],
                                    u = t[1];
                                Object.keys(u).forEach((function(n) {
                                    e(n, i) && delete s.listeners[i][n]
                                }))
                            }))
                        }))
                    }))
                }
                return {
                    publish: function(e, n, i) {
                        var s = o(i.eventKey),
                            u = i.isPersistent,
                            a = t(e, s),
                            c = a.listeners;
                        if (Object.entries(c).forEach((function(e) {
                                var t = (0, r.CR)(e, 2),
                                    u = t[0],
                                    a = t[1];
                                return Object.keys(a).forEach((function(e) {
                                    c[u][e].forEach((function(e) {
                                        return e({
                                            data: i.eventData,
                                            name: s,
                                            origin: n
                                        })
                                    }))
                                }))
                            })), u) {
                            var f = i.eventData;
                            a.persistentData.push({
                                name: s,
                                data: f
                            })
                        }
                    },
                    subscribe: function(e, r, i, s) {
                        var u = o(i.eventKey),
                            a = t(e, u);
                        a.listeners[n] || (a.listeners[n] = {}), a.listeners[n][r] ? "worker" === r && a.listeners[n][r].push(s) : a.listeners[n][r] = [s], i.isPersistent && a.persistentData.length && s({
                            data: a.persistentData[0].data,
                            name: u,
                            origin: r
                        }, !0)
                    },
                    unsubscribe: function(e, n, r) {
                        var i = t(e, o(r));
                        Object.keys(i.listeners).forEach((function(e) {
                            delete i.listeners[e][n]
                        }))
                    },
                    handleIframeSubscribe: function(n, t, r) {
                        var i = r.eventKey,
                            s = r.isPersistent,
                            u = r.callId;
                        this.subscribe(n, t, {
                            eventKey: i,
                            isPersistent: s
                        }, (function(n, r) {
                            void 0 === r && (r = !1),
                                function(e, n, t) {
                                    var r = t.document.getElementById(e);
                                    if (r) {
                                        var i = r.getElementsByTagName("iframe")[0];
                                        i && i.contentWindow && i.contentWindow.postMessage(JSON.stringify(n), "*")
                                    }
                                }(t, r ? {
                                    intent: "TPA_RESPONSE",
                                    callId: u,
                                    type: "registerEventListener",
                                    res: {
                                        drain: !0,
                                        data: [n]
                                    },
                                    status: !0,
                                    compId: t
                                } : {
                                    eventType: i,
                                    intent: "addEventListener",
                                    params: n
                                }, e)
                        }))
                    },
                    clearListenersBesideStubs: function() {
                        i((function(e, t) {
                            return !e.includes("tpapopup") && !e.includes("tpaWorker") && t === n && "masterPage" !== t
                        }))
                    },
                    clearListenersByCompId: function(e) {
                        i((function(n) {
                            return n === e
                        }))
                    }
                }
            }))
        }
    }
]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/platformPubsub.463396db.chunk.min.js.map