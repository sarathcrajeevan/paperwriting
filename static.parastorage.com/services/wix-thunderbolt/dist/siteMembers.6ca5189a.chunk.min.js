(self.webpackJsonp__wix_thunderbolt_app = self.webpackJsonp__wix_thunderbolt_app || []).push([
    [4522], {
        31857: function(e, t, n) {
            "use strict";
            n.r(t), n.d(t, {
                AUTH_RESULT_REASON: function() {
                    return C.$9
                },
                BIEvents: function() {
                    return y
                },
                INTERACTIONS: function() {
                    return C.SE
                },
                PrivacyStatus: function() {
                    return C.iY
                },
                SiteMembersApiSymbol: function() {
                    return D.n9
                },
                isLoginAcceptableError: function() {
                    return E.Y2
                },
                isSignupAcceptableError: function() {
                    return E.fJ
                },
                memberDetailsFromDTO: function() {
                    return E.Ky
                },
                page: function() {
                    return J
                },
                site: function() {
                    return G
                }
            });
            var i = n(43757),
                o = n(31191),
                s = n(61049),
                r = n(49574),
                a = n(5096),
                u = n(55048),
                c = n(98333),
                l = n(10666),
                d = n(58629),
                m = n(26513),
                g = n(82627),
                h = n(8562),
                p = n(56405),
                v = n(19238),
                f = n(87821),
                b = n(23228),
                S = n(99552),
                w = n(16684),
                C = n(95848),
                P = n(51831),
                D = n(2811),
                k = function() {
                    function e(e, t, n, i) {
                        this.propsStore = e, this.structureApi = t, this.siteScrollBlocker = n, this.browserWindow = i
                    }
                    return e.prototype.displayDialog = function(e, t, n, i) {
                        return void 0 === i && (i = {}), (0, o.mG)(this, void 0, Promise, (function() {
                            var s, r, a, u = this;
                            return (0, o.Jh)(this, (function(c) {
                                switch (c.label) {
                                    case 0:
                                        return s = function() {
                                            return (0, o.mG)(u, void 0, void 0, (function() {
                                                var i, s;
                                                return (0, o.Jh)(this, (function(r) {
                                                    switch (r.label) {
                                                        case 0:
                                                            return (0, h.yF)(this.browserWindow) || (this.activeElementBeforeShowDialog = this.browserWindow.document.activeElement), i = (0, w.uniqueId)(D.rj), this.propsStore.update(((s = {})[i] = (0, o.pi)((0, o.pi)({}, t), n), s)), (0, P.U)(), [4, this.structureApi.addComponentToDynamicStructure(i, {
                                                                componentType: e,
                                                                components: []
                                                            })];
                                                        case 1:
                                                            return r.sent(), this.currentCompId && (this.structureApi.removeComponentFromDynamicStructure(this.currentCompId), this.siteScrollBlocker.setSiteScrollingBlocked(!1, this.currentCompId)), this.siteScrollBlocker.setSiteScrollingBlocked(!0, i), this.currentCompId = i, [2]
                                                    }
                                                }))
                                            }))
                                        }, r = i.shouldWaitForAppDidMount, a = i.registerToAppDidMount, r && a ? (a(s), [3, 3]) : [3, 1];
                                    case 1:
                                        return [4, s()];
                                    case 2:
                                        c.sent(), c.label = 3;
                                    case 3:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.hideDialog = function() {
                        var e;
                        this.currentCompId && (this.structureApi.removeComponentFromDynamicStructure(this.currentCompId), this.siteScrollBlocker.setSiteScrollingBlocked(!1, this.currentCompId), (0, P.i)()), this.currentCompId = void 0, (0, h.yF)(this.browserWindow) || (null === (e = this.activeElementBeforeShowDialog) || void 0 === e || e.focus(), this.activeElementBeforeShowDialog = null)
                    }, e
                }(),
                E = n(43096),
                y = function(e) {
                    var t = e.sessionManager,
                        n = e.businessLogger,
                        i = e.wixBiSession,
                        s = e.viewMode,
                        r = e.language,
                        a = function(e, n) {
                            return {
                                biToken: i.msId,
                                context: e,
                                ts: T(i),
                                viewmode: s,
                                visitor_id: t.getVisitorId(),
                                site_member_id: t.getSiteMemberId(),
                                vsi: i.viewerSessionId,
                                site_settings_lng: r.siteLanguage,
                                browser_lng: r.userLanguage,
                                lng_mismatch: r.siteLanguage !== r.userLanguage,
                                layout: n
                            }
                        };
                    return {
                        loginOrSignUpDialogLoaded: function(e, t) {
                            void 0 === t && (t = "fullscreen"), n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 658
                            }, a(e, t)), {
                                endpoint: "site-members"
                            })
                        },
                        closingDialog: function(e, t) {
                            void 0 === t && (t = "fullscreen"), n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 602,
                                form_type: "default"
                            }, a(e, t)), {
                                endpoint: "site-members"
                            })
                        },
                        emailAuthSubmitClicked: function(e, t) {
                            n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 603,
                                form_type: "default"
                            }, a(e, t)), {
                                endpoint: "site-members"
                            })
                        },
                        siteMembersFeatureLoaded: function() {
                            n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 698
                            }, a()), {
                                endpoint: "site-members"
                            })
                        },
                        siteMembersSdkFeatureLoaded: function() {
                            n.logger.log((0, o.pi)({
                                src: 5,
                                evid: 699
                            }, a()), {
                                endpoint: "site-members"
                            })
                        }
                    }
                },
                T = function(e) {
                    var t = e.initialTimestamp || 0;
                    return Date.now() - t
                },
                L = function() {
                    function e(e) {
                        this.shouldRunCustomPopupCloseCallback = !0, this.popups = e, this.config = {
                            isCloseable: !0,
                            returnPages: !1
                        }
                    }
                    return e.prototype.openPopupPage = function(e, t) {
                        var n;
                        return (0, o.mG)(this, void 0, void 0, (function() {
                            var i, s = this;
                            return (0, o.Jh)(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return i = this.shouldRunCustomPopupCloseCallback, this.shouldRunCustomPopupCloseCallback = !1, [4, null === (n = this.popups) || void 0 === n ? void 0 : n.openPopupPage(e, (function() {
                                            s.shouldRunCustomPopupCloseCallback && (s.rejectAuthenticationRequest(), t && t())
                                        }))];
                                    case 1:
                                        return o.sent(), this.shouldRunCustomPopupCloseCallback = i, [2]
                                }
                            }))
                        }))
                    }, e.prototype.preventCustomPopupCloseCallback = function() {
                        this.shouldRunCustomPopupCloseCallback = !1
                    }, e.prototype.allowCustomPopupCloseCallback = function() {
                        this.shouldRunCustomPopupCloseCallback = !0
                    }, e.prototype.assignRequestAuthenticationRejection = function(e) {
                        this.requestAuthenticationRejection = this.requestAuthenticationRejection || e
                    }, e.prototype.assignRequestAuthenticationResolveInstance = function(e) {
                        this.requestAuthenticationResolveInstance = this.requestAuthenticationResolveInstance || e
                    }, e.prototype.rejectAuthenticationRequest = function() {
                        this.requestAuthenticationRejection && (this.requestAuthenticationRejection(C.$9.CANCELED), this.requestAuthenticationRejection = void 0)
                    }, e.prototype.setConfig = function(e) {
                        var t = e.isCloseable,
                            n = void 0 === t || t,
                            i = e.returnPages,
                            o = void 0 !== i && i;
                        this.config = {
                            isCloseable: n,
                            returnPages: o
                        }
                    }, e.prototype.reset = function() {
                        this.requestAuthenticationRejection = void 0, this.requestAuthenticationResolveInstance = void 0, this.config = {
                            isCloseable: !0,
                            returnPages: !1
                        }
                    }, e
                }(),
                I = function(e, t, n) {
                    document.cookie = e + "=;max-age=0", document.cookie = e + "=;max-age=0;path=" + t, document.cookie = e + "=;domain=" + n + ";max-age=0", document.cookie = e + "=;domain=" + n + ";max-age=0;path=" + t
                },
                A = (0, i.ff)([(0, i.t6)(s.R9, D.u2), (0, i.t6)(s.jC, D.u2), (0, i.t6)(s.Wf, D.u2), r.U, a.EE, a.Zr, p.X, u.xP, u.QZ, a.bk, a.ZQ, v.F0, f.x, c.v, v.Iz, l.$, d.s, (0, i.jt)(b.r_), (0, i.jt)(S.I), m.jj, g.O], (function(e, t, n, i, s, r, a, u, c, l, d, m, g, p, v, f, b, S, P, D, T) {
                    var A, R;
                    void 0 === P && (P = {
                        trackEvent: function() {
                            return 0
                        }
                    });
                    var _ = e.collectionExposure,
                        M = e.smcollectionId,
                        O = e.smSessionCookie,
                        N = e.protectedHomepage,
                        U = e.isCommunityInstalled,
                        G = e.memberInfoAppId,
                        J = e.isTemplate,
                        q = e.sm_efCookie,
                        F = "WixInternal" === _,
                        W = a.getUserSession(),
                        x = a.getAppInstanceByAppDefId("22bef345-3c5b-4c18-b782-74d4085112ff"),
                        B = null !== (A = a.getVisitorId()) && void 0 !== A ? A : "00000000-0000-0000-0000-000000000000",
                        j = t.smSettings,
                        V = t.tpaApplicationIds,
                        $ = t.policyLinks,
                        K = G && V[G],
                        z = r.site,
                        Y = z.siteRevision,
                        H = z.metaSiteId,
                        X = z.siteId,
                        Q = z.externalBaseUrl,
                        Z = r.requestUrl,
                        ee = r.viewMode,
                        te = -1 !== C.F0.findIndex((function(e) {
                            var t, n;
                            return null === (n = null === (t = null == d ? void 0 : d.navigator) || void 0 === t ? void 0 : t.userAgent) || void 0 === n ? void 0 : n.includes(e)
                        })),
                        ne = !te,
                        ie = !(T["specs.thunderbolt.sm_customLoginSocialAuthMessageInInAppBrowser"] && te),
                        oe = "/_api/wix-sm-webapp/tokens/verify/" + H + "/" + X,
                        se = Q.replace(/\/$/, "") + "/api/wix-sm/v1/authorize/" + X + "/pages",
                        re = "/_api/wix-sm-webapp/tokens/logout/" + H,
                        ae = "/_api/wix-sm-webapp/member/changePasswordWithMailToken?metaSiteId=" + H + "&collectionId=" + M,
                        ue = "/_api/wix-sm-webapp/social/token/handle?metaSiteId=" + H + "&collectionId=" + M,
                        ce = j.smFirstDialogLogin ? "login" : "signup",
                        le = j.socialLoginFacebookEnabled,
                        de = j.socialLoginGoogleEnabled,
                        me = j.termsOfUse,
                        ge = j.privacyPolicy,
                        he = j.codeOfConduct,
                        pe = j.customSignUpPageId,
                        ve = j.customSignInPageId,
                        fe = null === (R = j.joinCommunityCheckedByDefault) || void 0 === R || R,
                        be = e.smToken,
                        Se = {},
                        we = O,
                        Ce = null,
                        Pe = !1,
                        De = function(e) {
                            Ce = e
                        },
                        ke = function() {
                            return {
                                registerToAppDidMount: De,
                                shouldWaitForAppDidMount: !Pe
                            }
                        },
                        Ee = {},
                        ye = {},
                        Te = y({
                            sessionManager: a,
                            businessLogger: f,
                            wixBiSession: b,
                            viewMode: null == ee ? void 0 : ee.toUpperCase(),
                            language: l
                        });
                    Te.siteMembersFeatureLoaded();
                    var Le = {},
                        Ie = (0, E.Qn)(i, {
                            credentials: "same-origin",
                            headers: {
                                accept: "application/json",
                                "x-wix-site-revision": "" + Y,
                                "x-wix-client-artifact-id": "thunderbolt"
                            }
                        }, r.requestUrl),
                        Ae = function(e, t, n, i) {
                            return new k(e, t, n, i)
                        }(u, c, g, d),
                        Re = T["specs.thunderbolt.sm_googleAuthViaSDK"],
                        _e = new L(S),
                        Me = {
                            appDidMount: function() {
                                Ce && Ce(), Pe = !0
                            },
                            login: function(e, t, n, i) {
                                return void 0 === i && (i = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var s, r, a;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Submit",
                                                        eventLabel: "Wix"
                                                    }
                                                }), o.label = 1;
                                            case 1:
                                                return o.trys.push([1, 4, , 5]), [4, Me.performLogin(e, t, n)];
                                            case 2:
                                                return s = o.sent(), [4, Me.handleLoginResponse(s, i)];
                                            case 3:
                                                return r = o.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Success",
                                                        eventLabel: "Wix"
                                                    }
                                                }), [2, r];
                                            case 4:
                                                throw a = o.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Failure",
                                                        eventLabel: "Wix"
                                                    }
                                                }), a;
                                            case 5:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            performLogin: function(e, t, n) {
                                var i;
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var s;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return [4, Ie("/_api/wix-sm-webapp/v1/auth/login", {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type": "application/json",
                                                        authorization: x || ""
                                                    },
                                                    body: JSON.stringify({
                                                        email: e,
                                                        password: t,
                                                        recaptchaToken: null == n ? void 0 : n.recaptchaToken
                                                    })
                                                })];
                                            case 1:
                                                return [2, {
                                                    member: (s = o.sent()).member,
                                                    token: null === (i = null == s ? void 0 : s.session) || void 0 === i ? void 0 : i.token
                                                }]
                                        }
                                    }))
                                }))
                            },
                            handleOauthToken: function(e, t, n, i, r) {
                                return void 0 === r && (r = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var u, c, d, m, g, h, p, v;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return u = a.getVisitorId(), s.interactionStarted(C.SE.SOCIAL_APP_LOGIN), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Submit",
                                                        eventLabel: t
                                                    }
                                                }), [4, Ie(ue, {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type": "application/json"
                                                    },
                                                    body: JSON.stringify({
                                                        svSession: W,
                                                        visitorId: u,
                                                        token: e,
                                                        provider: t,
                                                        mode: n,
                                                        lang: l.userLanguage,
                                                        privacyStatus: i
                                                    })
                                                })];
                                            case 1:
                                                if (c = o.sent(), d = c.errorCode, m = c.payload, d) throw P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Failure",
                                                        eventLabel: t
                                                    }
                                                }), d;
                                                return s.interactionEnded(C.SE.SOCIAL_APP_LOGIN), m.smSession && (h = m.smSession.siteMemberDto, g = m.smSession.sessionToken), h = m.siteMemberDto, p = (0, E.Ky)(h), [4, Me.handleLoginResponse({
                                                    member: p,
                                                    token: g
                                                }, r)];
                                            case 2:
                                                return v = o.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Success",
                                                        eventLabel: t
                                                    }
                                                }), [2, v]
                                        }
                                    }))
                                }))
                            },
                            handleSocialLoginResponse: function(e, t, n) {
                                return void 0 === n && (n = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i, r, a, u;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return s.interactionStarted(C.SE.SOCIAL_APP_LOGIN), s.interactionEnded(C.SE.SOCIAL_APP_LOGIN), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Submit",
                                                        eventLabel: t
                                                    }
                                                }), e.smSession && (r = e.smSession.siteMemberDto, i = e.smSession.sessionToken), r = e.siteMemberDto, a = (0, E.Ky)(r), [4, Me.handleLoginResponse({
                                                    member: a,
                                                    token: i
                                                }, n)];
                                            case 1:
                                                return u = o.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Log in Success",
                                                        eventLabel: t
                                                    }
                                                }), [2, u]
                                        }
                                    }))
                                }))
                            },
                            handleLoginResponse: function(e, t) {
                                var n = e.token,
                                    i = e.member;
                                return void 0 === t && (t = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var e, s, r;
                                    return (0, o.Jh)(this, (function(a) {
                                        switch (a.label) {
                                            case 0:
                                                return e = i.emailVerified, n || e || "ACTIVE" !== i.status ? [3, 2] : [4, Me.showConfirmationEmailDialog(i.id)];
                                            case 1:
                                            case 4:
                                                return a.sent(), [2, (0, E.Y_)()];
                                            case 2:
                                                return n ? [3, 5] : [4, p()];
                                            case 3:
                                                return s = a.sent(), [4, Me.showNotificationDialog("", (s("siteMembersTranslations", "SMApply_Success1", "Success! Your member signup request has been sent and is awaiting approval.") + " " + s("siteMembersTranslations", "SMApply_Success2", "The site administrator will notify you via email ({0}) once your request has been approved.")).replace("{0}", i.loginEmail), s("siteMembersTranslations", "SMContainer_OK", "OK"))];
                                            case 5:
                                                return [4, Me.applySessionToken(n, i, t)];
                                            case 6:
                                                return r = a.sent(), [2, (0, o.pi)({
                                                    sessionToken: n,
                                                    member: i
                                                }, t ? {
                                                    pages: r
                                                } : {})]
                                        }
                                    }))
                                }))
                            },
                            promptLogin: function(e, t, n) {
                                var i, s, r, a;
                                return void 0 === e && (e = {}), void 0 === t && (t = null === (s = null === (i = _e.config) || void 0 === i ? void 0 : i.isCloseable) || void 0 === s || s), void 0 === n && (n = null !== (a = null === (r = _e.config) || void 0 === r ? void 0 : r.returnPages) && void 0 !== a && a), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i, s, r, a, u;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return i = e.mode, s = e.modal, r = null != i ? i : ce, a = s ? "popup" : "fullscreen", J ? [4, p()] : [3, 3];
                                            case 1:
                                                return u = o.sent(), [4, Me.showNotificationDialog(u("siteMembersTranslations", "siteMembersTranslations_TEMPLATE_NOTIFICATION_TITLE", "Demo Mode"), u("siteMembersTranslations", "siteMembersTranslations_TEMPLATE_NOTIFICATION_MESSAGE", "To make this template yours, start editing it."), u("siteMembersTranslations", "SMContainer_OK", "OK"))];
                                            case 2:
                                                return o.sent(), [2, Promise.reject(C.$9.CANCELED)];
                                            case 3:
                                                return "login" === r ? [2, Me.showLoginDialog(t, a, n)] : [2, Me.showSignUpDialog(t, a, n)]
                                        }
                                    }))
                                }))
                            },
                            promptForgotPassword: function(e) {
                                return void 0 === e && (e = !0), new Promise((function(t, n) {
                                    _e.assignRequestAuthenticationRejection(n);
                                    var i = {
                                            isCloseable: e
                                        },
                                        s = {
                                            onCloseDialogCallback: function() {
                                                Te.closingDialog("RequestResetPassword"), Ae.hideDialog(), _e.rejectAuthenticationRequest()
                                            },
                                            onSubmitCallback: function(e) {
                                                var n = this;
                                                return Me.sendForgotPasswordMail(e).then((function() {
                                                    return (0, o.mG)(n, void 0, void 0, (function() {
                                                        var e;
                                                        return (0, o.Jh)(this, (function(n) {
                                                            switch (n.label) {
                                                                case 0:
                                                                    return [4, p()];
                                                                case 1:
                                                                    return e = n.sent(), Me.showNotificationDialog(e("siteMembersTranslations", "siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE", "Please Check Your Email"), e("siteMembersTranslations", "siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT", "We\u2019ve emailed you a link to reset your password."), e("siteMembersTranslations", "siteMembersTranslations_Reset_Password_OK", "Got It")), t(), [2]
                                                            }
                                                        }))
                                                    }))
                                                }))
                                            }
                                        },
                                        r = T["specs.thunderbolt.smModalsShouldWaitForAppDidMount"] ? ke() : {};
                                    Ae.displayDialog("RequestPasswordResetDialog", i, s, r)
                                }))
                            },
                            requestAuthentication: function(e) {
                                return void 0 === e && (e = {}), (0, o.mG)(this, void 0, Promise, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                if (we) return [2, {
                                                    success: !0,
                                                    token: we,
                                                    reason: C.$9.ALREADY_LOGGED_IN
                                                }];
                                                n.label = 1;
                                            case 1:
                                                return n.trys.push([1, 3, , 4]), t = !N, [4, Me.promptLogin(e, t)];
                                            case 2:
                                                return [2, {
                                                    success: !0,
                                                    token: n.sent().sessionToken,
                                                    reason: C.$9.SUCCESS
                                                }];
                                            case 3:
                                                return [2, {
                                                    success: !1,
                                                    reason: n.sent()
                                                }];
                                            case 4:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            requestAuthorizedPages: function(e) {
                                return void 0 === e && (e = {}), (0, o.mG)(this, void 0, Promise, (function() {
                                    var t, n;
                                    return (0, o.Jh)(this, (function(i) {
                                        switch (i.label) {
                                            case 0:
                                                return be ? [4, Me.authorizeMemberPagesBySignedInstance(be)] : [3, 2];
                                            case 1:
                                                return [2, {
                                                    success: !0,
                                                    pages: i.sent()
                                                }];
                                            case 2:
                                                return i.trys.push([2, 4, , 5]), t = !N, _e.setConfig({
                                                    isCloseable: t,
                                                    returnPages: !0
                                                }), [4, Me.promptLogin(e, t, !0)];
                                            case 3:
                                                return n = i.sent(), _e.reset(), [2, {
                                                    success: !0,
                                                    pages: n.pages
                                                }];
                                            case 4:
                                                return [2, {
                                                    success: !1,
                                                    reason: i.sent()
                                                }];
                                            case 5:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            applySessionToken: function(e, t, n) {
                                return void 0 === n && (n = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i, r, u, c;
                                    return (0, o.Jh)(this, (function(l) {
                                        switch (l.label) {
                                            case 0:
                                                return s.interactionStarted(C.SE.VERIFY_TOKEN), [4, Ie(oe, {
                                                    method: "POST",
                                                    body: "token=" + e
                                                })];
                                            case 1:
                                                if (i = l.sent(), r = i.payload, u = i.errorCode) throw u;
                                                return s.interactionEnded(C.SE.VERIFY_TOKEN), [4, a.loadNewSession({
                                                    reason: "memberLogin"
                                                })];
                                            case 2:
                                                return l.sent(), be = a.getSmToken(), we = e, null == t ? [3, 3] : (c = t, [3, 5]);
                                            case 3:
                                                return [4, Me.getMemberDetails()];
                                            case 4:
                                                c = l.sent(), l.label = 5;
                                            case 5:
                                                return Se = c, [4, Promise.all(Object.entries(Ee).map((function(e) {
                                                    var t = (0, o.CR)(e, 2),
                                                        n = t[0],
                                                        i = t[1];
                                                    return (0, o.mG)(void 0, void 0, void 0, (function() {
                                                        var e;
                                                        return (0, o.Jh)(this, (function(t) {
                                                            switch (t.label) {
                                                                case 0:
                                                                    return t.trys.push([0, 2, , 3]), [4, Promise.race([i(), (0, E._v)(3e3).then((function() {
                                                                        return "$$$timeout$$$"
                                                                    }))])];
                                                                case 1:
                                                                    if ("$$$timeout$$$" === t.sent()) throw new Error("callback " + n + " timed out");
                                                                    return [3, 3];
                                                                case 2:
                                                                    return e = t.sent(), s.captureError(e, {
                                                                        tags: {
                                                                            feature: "site-members"
                                                                        }
                                                                    }), [3, 3];
                                                                case 3:
                                                                    return [2]
                                                            }
                                                        }))
                                                    }))
                                                })))];
                                            case 6:
                                                return l.sent(), n ? [2, r.pages] : [2]
                                        }
                                    }))
                                }))
                            },
                            authorizeMemberPagesByCookie: function() {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var e, t, n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return e = (0, h.yF)(d) ? {
                                                    headers: {
                                                        cookie: "smSession=" + O
                                                    }
                                                } : void 0, [4, Ie(se, e)];
                                            case 1:
                                                if (t = o.sent(), n = t.authorizedPages, i = t.errorCode) throw i;
                                                return [2, n]
                                        }
                                    }))
                                }))
                            },
                            authorizeMemberPagesByToken: function(e) {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var t, n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return e === O ? [2, this.authorizeMemberPagesByCookie()] : [4, Ie(oe, {
                                                    method: "POST",
                                                    body: "token=" + e
                                                })];
                                            case 1:
                                                if (t = o.sent(), n = t.payload, i = t.errorCode) throw i;
                                                return [2, n.pages]
                                        }
                                    }))
                                }))
                            },
                            authorizeMemberPagesBySignedInstance: function(e) {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var t, n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return [4, Ie(se, {
                                                    headers: {
                                                        authorization: e
                                                    }
                                                })];
                                            case 1:
                                                if (t = o.sent(), n = t.authorizedPages, i = t.errorCode) throw i;
                                                return [2, n]
                                        }
                                    }))
                                }))
                            },
                            getMemberDetails: function(e) {
                                return void 0 === e && (e = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var t, n, i;
                                    return (0, o.Jh)(this, (function(r) {
                                        switch (r.label) {
                                            case 0:
                                                return !Se.id || e ? [3, 1] : [2, Se];
                                            case 1:
                                                return be ? [4, Ie("/_api/wix-sm-webapp/member/" + be + "?collectionId=" + M + "&metaSiteId=" + H)] : [3, 5];
                                            case 2:
                                                if (t = r.sent(), n = t.payload, i = t.errorCode) throw i;
                                                return Se = (0, E.Ky)(n), e ? [4, Promise.all(Object.values(Le).map((function(e) {
                                                    return (0, o.mG)(void 0, void 0, void 0, (function() {
                                                        var t;
                                                        return (0, o.Jh)(this, (function(n) {
                                                            switch (n.label) {
                                                                case 0:
                                                                    return n.trys.push([0, 2, , 3]), [4, e()];
                                                                case 1:
                                                                    return n.sent(), [3, 3];
                                                                case 2:
                                                                    return t = n.sent(), s.captureError(t, {
                                                                        tags: {
                                                                            feature: "site-members"
                                                                        }
                                                                    }), [3, 3];
                                                                case 3:
                                                                    return [2]
                                                            }
                                                        }))
                                                    }))
                                                })))] : [3, 4];
                                            case 3:
                                                r.sent(), r.label = 4;
                                            case 4:
                                                return [2, Se];
                                            case 5:
                                                return [2, null]
                                        }
                                    }))
                                }))
                            },
                            register: function(e, t, n, i, r, a, u) {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var c, l, d, m, g, h, v, f, b, S, w;
                                    return (0, o.Jh)(this, (function(D) {
                                        switch (D.label) {
                                            case 0:
                                                a = null != a && a, D.label = 1;
                                            case 1:
                                                return D.trys.push([1, 10, , 11]), s.interactionStarted(C.SE.CODE_SIGNUP), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Sign up Submit",
                                                        eventLabel: "Wix"
                                                    }
                                                }), c = {
                                                    email: e,
                                                    password: t,
                                                    profilePrivacyStatus: i,
                                                    contactInfo: (0, E.t1)(n || {}),
                                                    defaultFlow: r,
                                                    recaptchaToken: u
                                                }, [4, Ie("/_api/wix-sm-webapp/v1/auth/signup", {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type": "application/json",
                                                        authorization: x || ""
                                                    },
                                                    body: JSON.stringify(c)
                                                })];
                                            case 2:
                                                return l = D.sent(), d = l.member, m = l.approvalToken, g = l.session, h = d.emailVerified, v = null == g ? void 0 : g.token, f = "ACTIVE" === (null == d ? void 0 : d.status) ? "ACTIVE" : "PENDING", v || h || "ACTIVE" !== d.status ? [3, 4] : [4, Me.showConfirmationEmailDialog(d.id)];
                                            case 3:
                                                return D.sent(), s.interactionEnded(C.SE.CODE_SIGNUP), [2, {
                                                    member: d,
                                                    status: f
                                                }];
                                            case 4:
                                                return r && "APPLICANT" === (null == d ? void 0 : d.status) || !v ? [4, p()] : [3, 7];
                                            case 5:
                                                return b = D.sent(), [4, Me.showNotificationDialog("", (b("siteMembersTranslations", "SMApply_Success1", "Success! Your member login request has been sent and is awaiting approval.") + " " + b("siteMembersTranslations", "SMApply_Success2", "The site administrator will notify you via email ({0}) once your request has been approved.")).replace("{0}", e), b("siteMembersTranslations", "SMContainer_OK", "OK"))];
                                            case 6:
                                                return D.sent(), s.interactionEnded(C.SE.CODE_SIGNUP), [2, {
                                                    member: d,
                                                    status: f,
                                                    approvalToken: m
                                                }];
                                            case 7:
                                                return [4, Me.applySessionToken(v, d, a)];
                                            case 8:
                                                return S = D.sent(), s.interactionEnded(C.SE.CODE_SIGNUP), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Sign up Success",
                                                        eventLabel: "Wix"
                                                    }
                                                }), P.trackEvent({
                                                    eventName: "CompleteRegistration",
                                                    params: {
                                                        origin: "Site members",
                                                        method: "Wix"
                                                    }
                                                }), [2, (0, o.pi)({
                                                    member: d,
                                                    status: f,
                                                    sessionToken: v
                                                }, a && S ? {
                                                    pages: S
                                                } : {})];
                                            case 9:
                                                return [3, 11];
                                            case 10:
                                                throw w = D.sent(), P.trackEvent({
                                                    eventName: "CustomEvent",
                                                    params: {
                                                        eventCategory: "Site members",
                                                        eventAction: "Sign up Failure",
                                                        eventLabel: "Wix"
                                                    }
                                                }), (0, E.fJ)(w) && s.interactionEnded(C.SE.CODE_SIGNUP), w;
                                            case 11:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            sendForgotPasswordMail: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t, n, i, r;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return s.interactionStarted(C.SE.RESET_PASSWORD), t = l.userLanguage, n = encodeURIComponent(Z), i = encodeURIComponent(e), [4, Ie("/_api/wix-sm-webapp/member/sendForgotPasswordMail", {
                                                    method: "POST",
                                                    body: "returnUrl=" + n + "&collectionId=" + M + "&metaSiteId=" + H + "&lang=" + t + "&email=" + i
                                                })];
                                            case 1:
                                                if (r = o.sent().errorCode) throw r;
                                                return s.interactionEnded(C.SE.RESET_PASSWORD), [2]
                                        }
                                    }))
                                }))
                            },
                            sendSetPasswordEmail: function(e, t) {
                                return (0, o.mG)(this, void 0, Promise, (function() {
                                    var n;
                                    return (0, o.Jh)(this, (function(i) {
                                        switch (i.label) {
                                            case 0:
                                                return [4, Ie("/_api/wix-sm-webapp/members/v1/auth/members/send-set-password-email", {
                                                    method: "POST",
                                                    headers: {
                                                        "Content-Type": "application/json",
                                                        authorization: x || ""
                                                    },
                                                    body: JSON.stringify((0, o.pi)({
                                                        email: e
                                                    }, (null == t ? void 0 : t.hideIgnoreMessage) ? {
                                                        hideIgnoreMessage: t.hideIgnoreMessage
                                                    } : {}))
                                                })];
                                            case 1:
                                                return [2, !!(null == (n = i.sent()) ? void 0 : n.accepted)]
                                        }
                                    }))
                                }))
                            },
                            changePassword: function(e, t) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return n = encodeURIComponent(e), [4, Ie(ae, {
                                                    method: "POST",
                                                    body: "newPassword=" + n + "&forgotPasswordToken=" + t
                                                })];
                                            case 1:
                                                if (i = o.sent().errorCode) throw i;
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            resendEmailVerification: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                return [4, Ie("/_api/wix-sm-webapp/tokens/email/resend/" + e)];
                                            case 1:
                                                if (t = n.sent().errorCode) throw t;
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            logout: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                return be ? [4, Ie(re, {
                                                    method: "POST"
                                                })] : [2];
                                            case 1:
                                                return n.sent(), [4, Promise.all(Object.values(ye).map((function(e) {
                                                    return (0, o.mG)(void 0, void 0, void 0, (function() {
                                                        var t;
                                                        return (0, o.Jh)(this, (function(n) {
                                                            switch (n.label) {
                                                                case 0:
                                                                    return n.trys.push([0, 2, , 3]), [4, e()];
                                                                case 1:
                                                                    return n.sent(), [3, 3];
                                                                case 2:
                                                                    return t = n.sent(), s.captureError(t, {
                                                                        tags: {
                                                                            feature: "site-members"
                                                                        }
                                                                    }), [3, 3];
                                                                case 3:
                                                                    return [2]
                                                            }
                                                        }))
                                                    }))
                                                })))];
                                            case 2:
                                                return n.sent(), e ? (t = "./" + e.replace(/^\//, ""), [4, m.navigate(t)]) : [3, 4];
                                            case 3:
                                                n.sent(), n.label = 4;
                                            case 4:
                                                return (0, h.yF)(d) || d.document.location.reload(), [2]
                                        }
                                    }))
                                }))
                            },
                            registerToUserLogin: function(e, t) {
                                return void 0 === t && (t = (0, w.uniqueId)("callback")), Ee[t] = e, t
                            },
                            unRegisterToUserLogin: function(e) {
                                delete Ee[e]
                            },
                            registerToMemberLogout: function(e) {
                                var t = (0, w.uniqueId)("logout_callback");
                                return ye[t] = e, t
                            },
                            unRegisterToMemberLogout: function(e) {
                                delete ye[e]
                            },
                            registerToMemberDetailsRefresh: function(e) {
                                var t = (0, w.uniqueId)("mdrcb");
                                return Le[t] = e, t
                            },
                            unRegisterToMemberDetailsRefresh: function(e) {
                                delete Le[e]
                            },
                            showWelcomeDialog: function(e) {
                                return void 0 === e && (e = !0), (0, o.mG)(this, void 0, void 0, (function() {
                                    var t, n, i;
                                    return (0, o.Jh)(this, (function(o) {
                                        return t = {
                                            isCloseable: e
                                        }, n = v.getParsedUrl(), i = {
                                            onCloseDialogCallback: function() {
                                                Te.closingDialog("WelcomeDialog");
                                                var e = new URL(r.requestUrl).hostname,
                                                    t = 0 === e.indexOf("www") ? e.substr(3) : e;
                                                I("sm_ef", "/", t), q = "", Ae.hideDialog(), m.navigate(n.href)
                                            },
                                            onSubmitCallback: function() {
                                                var e = new URL(r.requestUrl).hostname,
                                                    t = 0 === e.indexOf("www") ? e.substr(3) : e;
                                                I("sm_ef", "/", t), q = "", Ae.hideDialog(), K && m.navigate("./account/my-account"), m.navigate(n.href)
                                            }
                                        }, Ae.displayDialog("WelcomeDialog", t, i), [2]
                                    }))
                                }))
                            },
                            showNoPermissionsToPageDialog: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        return t = {
                                            onCloseDialogCallback: function() {
                                                Ae.hideDialog(), e && e()
                                            },
                                            onSwitchAccountLinkClick: function() {
                                                Me.logout()
                                            }
                                        }, Ae.displayDialog("NoPermissionsToPageDialog", {}, t), [2]
                                    }))
                                }))
                            },
                            showResetPasswordDialog: function(e) {
                                return (0, o.mG)(this, void 0, void 0, (function() {
                                    var t, n;
                                    return (0, o.Jh)(this, (function(i) {
                                        return t = {
                                            isCloseable: !0,
                                            isPolicyLinksSectionVisible: T["specs.thunderbolt.sm_showPolicyLinksResetPasswordDialog"],
                                            isTermsOfUseNeeded: !(!(null == me ? void 0 : me.enabled) || !$.termsOfUse),
                                            isPrivacyPolicyNeeded: !(!(null == ge ? void 0 : ge.enabled) || !$.privacyPolicy),
                                            termsOfUseLink: $.termsOfUse,
                                            privacyPolicyLink: $.privacyPolicy
                                        }, n = {
                                            onCloseDialogCallback: function() {
                                                Te.closingDialog("ResetPasswordDialog");
                                                var e = v.getParsedUrl();
                                                e.searchParams.delete("forgotPasswordToken"), e.searchParams.delete("forgotPasswordLang"), v.pushUrlState(e), Ae.hideDialog(), m.navigate(e.href)
                                            },
                                            onSubmitCallback: function(n) {
                                                return (0, o.mG)(this, void 0, void 0, (function() {
                                                    var i, s, r = this;
                                                    return (0, o.Jh)(this, (function(a) {
                                                        switch (a.label) {
                                                            case 0:
                                                                return [4, p()];
                                                            case 1:
                                                                i = a.sent(), a.label = 2;
                                                            case 2:
                                                                return a.trys.push([2, 4, , 5]), [4, Me.changePassword(n, e)];
                                                            case 3:
                                                                return a.sent(), Me.showNotificationDialog(i("siteMembersTranslations", "siteMembersTranslations_Reset_Password_Sucess_Title", "Your password has been changed."), "", i("siteMembersTranslations", "SMContainer_OK", "OK"), (function() {
                                                                    return (0, o.mG)(r, void 0, void 0, (function() {
                                                                        var e;
                                                                        return (0, o.Jh)(this, (function(t) {
                                                                            switch (t.label) {
                                                                                case 0:
                                                                                    return (e = v.getParsedUrl()).searchParams.delete("forgotPasswordToken"), e.searchParams.delete("forgotPasswordLang"), v.pushUrlState(e), [4, Me.showLoginDialog()];
                                                                                case 1:
                                                                                    return t.sent(), m.navigate(e.href), [2]
                                                                            }
                                                                        }))
                                                                    }))
                                                                })), [3, 5];
                                                            case 4:
                                                                if (-19972 !== (s = a.sent())) throw s;
                                                                return Me.showNotificationDialog(i("siteMembersTranslations", "siteMembersTranslations_PASSWORD_HAS_EXPIRED_TITLE", "Your link to create a new password has expired"), i("siteMembersTranslations", "siteMembersTranslations_PASSWORD_HAS_EXPIRED_TEXT", "To continue, resend a new link to your email."), i("siteMembersTranslations", "siteMembersTranslations_PASSWORD_HAS_EXPIRED_OK", "Resend Link"), (function() {
                                                                    return Me.promptForgotPassword(t.isCloseable).then((function() {
                                                                        var e = v.getParsedUrl();
                                                                        m.navigate(e.href)
                                                                    }))
                                                                })), [3, 5];
                                                            case 5:
                                                                return [2]
                                                        }
                                                    }))
                                                }))
                                            }
                                        }, Ae.displayDialog("ResetPasswordDialog", t, n, ke()), [2]
                                    }))
                                }))
                            },
                            showLoginDialog: function(e, t, n) {
                                return void 0 === e && (e = !0), void 0 === t && (t = "fullscreen"), void 0 === n && (n = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i = this;
                                    return (0, o.Jh)(this, (function(r) {
                                        return ve && (null == S ? void 0 : S.isPopupPage(ve)) ? [2, Me.showCustomAuthenticationDialog(ve, n)] : [2, new Promise((function(r, a) {
                                            return (0, o.mG)(i, void 0, void 0, (function() {
                                                var i, u;
                                                return (0, o.Jh)(this, (function(o) {
                                                    switch (o.label) {
                                                        case 0:
                                                            return _e.assignRequestAuthenticationRejection(a), i = {
                                                                displayMode: t,
                                                                language: l.userLanguage,
                                                                directionByLanguage: l.directionByLanguage,
                                                                isCloseable: e,
                                                                smCollectionId: M,
                                                                svSession: W,
                                                                biVisitorId: B,
                                                                metaSiteId: H,
                                                                isSocialLoginGoogleEnabled: de,
                                                                isSocialLoginFacebookEnabled: !F && le,
                                                                isEmailLoginEnabled: !F,
                                                                isSocialAuthSupported: ne,
                                                                useGoogleSdk: Re
                                                            }, u = {
                                                                onCloseDialogCallback: function() {
                                                                    Ae.hideDialog(), Te.closingDialog("MemberLoginDialog", t), _e.rejectAuthenticationRequest()
                                                                },
                                                                submit: function(e, i, o) {
                                                                    return s.interactionStarted(C.SE.DEFAULT_LOGIN), Te.emailAuthSubmitClicked("MemberLoginDialog", t), Me.login(e, i, o, n).then((function(e) {
                                                                        s.interactionEnded(C.SE.DEFAULT_LOGIN), Ae.hideDialog(), r(e)
                                                                    })).catch((function(e) {
                                                                        throw (0, E.Y2)(e) && s.interactionEnded(C.SE.DEFAULT_LOGIN), e
                                                                    }))
                                                                },
                                                                onForgetYourPasswordClick: function() {
                                                                    Me.promptForgotPassword(e)
                                                                },
                                                                onSwitchDialogLinkClick: function() {
                                                                    Me.showSignUpDialog(e, t, n).then(r, (function() {
                                                                        _e.rejectAuthenticationRequest()
                                                                    }))
                                                                },
                                                                onTokenMessage: function(e, t, i) {
                                                                    var o;
                                                                    return void 0 === i && (i = !1), U && (o = i ? "PUBLIC" : "PRIVATE"), Me.handleOauthToken(e, t, "memberLoginDialog", o, n).then((function(e) {
                                                                        Ae.hideDialog(), r(e)
                                                                    }))
                                                                },
                                                                onBackendSocialLogin: function(e, t) {
                                                                    return Me.handleSocialLoginResponse(e, t, n).then((function(e) {
                                                                        Ae.hideDialog(), r(e)
                                                                    }))
                                                                },
                                                                getHostReadyPayload: function() {
                                                                    return {
                                                                        visitorId: B,
                                                                        svSession: W
                                                                    }
                                                                }
                                                            }, Te.loginOrSignUpDialogLoaded("MemberLoginDialog", t), [4, Ae.displayDialog("MemberLoginDialog", i, u, ke())];
                                                        case 1:
                                                            return o.sent(), Me.closeCustomAuthenticationDialogs(!0), [2]
                                                    }
                                                }))
                                            }))
                                        }))]
                                    }))
                                }))
                            },
                            showSignUpDialog: function(e, t, n) {
                                return void 0 === e && (e = !0), void 0 === t && (t = "fullscreen"), void 0 === n && (n = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var i = this;
                                    return (0, o.Jh)(this, (function(r) {
                                        return pe && (null == S ? void 0 : S.isPopupPage(pe)) ? [2, Me.showCustomAuthenticationDialog(pe, n)] : [2, new Promise((function(r, a) {
                                            return (0, o.mG)(i, void 0, void 0, (function() {
                                                var i, u;
                                                return (0, o.Jh)(this, (function(c) {
                                                    switch (c.label) {
                                                        case 0:
                                                            return _e.assignRequestAuthenticationRejection(a), i = {
                                                                displayMode: t,
                                                                language: l.userLanguage,
                                                                directionByLanguage: l.directionByLanguage,
                                                                isCloseable: e,
                                                                smCollectionId: M,
                                                                biVisitorId: B,
                                                                svSession: W,
                                                                metaSiteId: H,
                                                                isSocialLoginGoogleEnabled: de,
                                                                isSocialLoginFacebookEnabled: !F && le,
                                                                isSocialAuthSupported: ne,
                                                                isEmailLoginEnabled: !F,
                                                                isCommunityInstalled: U,
                                                                joinCommunityCheckedByDefault: fe,
                                                                isTermsOfUseNeeded: !(!(null == me ? void 0 : me.enabled) || !$.termsOfUse),
                                                                isPrivacyPolicyNeeded: !(!(null == ge ? void 0 : ge.enabled) || !$.privacyPolicy),
                                                                isCodeOfConductNeeded: !(!(null == he ? void 0 : he.enabled) || !$.codeOfConduct),
                                                                termsOfUseLink: $.termsOfUse,
                                                                privacyPolicyLink: $.privacyPolicy,
                                                                codeOfConductLink: $.codeOfConduct,
                                                                useGoogleSdk: Re
                                                            }, u = {
                                                                onCloseDialogCallback: function() {
                                                                    Ae.hideDialog(), Te.closingDialog("SignUpDialog", t), _e.rejectAuthenticationRequest()
                                                                },
                                                                submit: function(e, i, a) {
                                                                    var u;
                                                                    U && (u = ("boolean" == typeof a ? a : a.isCommunityChecked) ? C.iY.PUBLIC : C.iY.PRIVATE);
                                                                    var c = "boolean" == typeof a || null == a ? void 0 : a.recaptchaToken;
                                                                    return s.interactionStarted(C.SE.DEFAULT_SIGNUP), Te.emailAuthSubmitClicked("SignUpDialog", t), Me.register(e, i, void 0, u, void 0, n, c).then((function(e) {
                                                                        s.interactionEnded(C.SE.DEFAULT_SIGNUP);
                                                                        var t = e.member,
                                                                            i = e.sessionToken,
                                                                            a = e.pages;
                                                                        i && (Ae.hideDialog(), r((0, o.pi)({
                                                                            member: t,
                                                                            sessionToken: i
                                                                        }, n ? {
                                                                            pages: a
                                                                        } : {})))
                                                                    })).catch((function(e) {
                                                                        throw (0, E.fJ)(e) && s.interactionEnded(C.SE.DEFAULT_SIGNUP), e
                                                                    }))
                                                                },
                                                                onSwitchDialogLinkClick: function() {
                                                                    Me.showLoginDialog(e, t, n).then(r, (function() {
                                                                        _e.rejectAuthenticationRequest()
                                                                    }))
                                                                },
                                                                onTokenMessage: function(e, t, i) {
                                                                    var o;
                                                                    return void 0 === i && (i = !1), U && (o = i ? "PUBLIC" : "PRIVATE"), Me.handleOauthToken(e, t, "memberLoginDialog", o, n).then((function(e) {
                                                                        Ae.hideDialog(), r(e)
                                                                    }))
                                                                },
                                                                onBackendSocialLogin: function(e, t) {
                                                                    return Me.handleSocialLoginResponse(e, t, n).then((function(e) {
                                                                        Ae.hideDialog(), r(e)
                                                                    }))
                                                                },
                                                                getHostReadyPayload: function() {
                                                                    return {
                                                                        visitorId: B,
                                                                        svSession: W
                                                                    }
                                                                }
                                                            }, Te.loginOrSignUpDialogLoaded("SignUpDialog", t), [4, Ae.displayDialog("SignUpDialog", i, u, ke())];
                                                        case 1:
                                                            return c.sent(), Me.closeCustomAuthenticationDialogs(!0), [2]
                                                    }
                                                }))
                                            }))
                                        }))]
                                    }))
                                }))
                            },
                            showNotificationDialog: function(e, t, n, i, s) {
                                return void 0 === i && (i = function() {
                                    return 0
                                }), void 0 === s && (s = function() {
                                    return 0
                                }), (0, o.mG)(this, void 0, void 0, (function() {
                                    var r, a;
                                    return (0, o.Jh)(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                return r = {
                                                    isCloseable: !0,
                                                    title: e,
                                                    description: t,
                                                    okButtonText: n
                                                }, a = {
                                                    onCloseDialogCallback: function() {
                                                        Te.closingDialog("NotificationDialog"), Ae.hideDialog(), s()
                                                    },
                                                    onOkButtonClick: function() {
                                                        Ae.hideDialog(), i()
                                                    }
                                                }, [4, Ae.displayDialog("NotificationDialog", r, a)];
                                            case 1:
                                                return o.sent(), [2]
                                        }
                                    }))
                                }))
                            },
                            showConfirmationEmailDialog: function(e, t) {
                                return void 0 === t && (t = !0), (0, o.mG)(this, void 0, void 0, (function() {
                                    var n, i;
                                    return (0, o.Jh)(this, (function(s) {
                                        switch (s.label) {
                                            case 0:
                                                return n = {
                                                    isCloseable: !0,
                                                    isSignUp: t
                                                }, i = {
                                                    onCloseDialogCallback: function() {
                                                        Te.closingDialog("ConfirmationEmailDialog"), Ae.hideDialog()
                                                    },
                                                    onResendConfirmationEmail: function() {
                                                        return (0, o.mG)(this, void 0, void 0, (function() {
                                                            return (0, o.Jh)(this, (function(t) {
                                                                switch (t.label) {
                                                                    case 0:
                                                                        return [4, Me.resendEmailVerification(e)];
                                                                    case 1:
                                                                        return t.sent(), [4, Me.showConfirmationEmailDialog(e, !1)];
                                                                    case 2:
                                                                        return t.sent(), [2]
                                                                }
                                                            }))
                                                        }))
                                                    }
                                                }, [4, Ae.displayDialog("ConfirmationEmailDialog", n, i)];
                                            case 1:
                                                return s.sent(), [2]
                                        }
                                    }))
                                }))
                            },
                            showCustomAuthenticationDialog: function(e, t) {
                                return void 0 === t && (t = !1), (0, o.mG)(this, void 0, Promise, (function() {
                                    var n = this;
                                    return (0, o.Jh)(this, (function(i) {
                                        if (!S) throw new Error("popup unavailable");
                                        return [2, new Promise((function(i, s) {
                                            return (0, o.mG)(n, void 0, void 0, (function() {
                                                var n, r = this;
                                                return (0, o.Jh)(this, (function(a) {
                                                    switch (a.label) {
                                                        case 0:
                                                            return _e.assignRequestAuthenticationResolveInstance(i), _e.assignRequestAuthenticationRejection(s), n = Me.registerToUserLogin((function() {
                                                                return (0, o.mG)(r, void 0, void 0, (function() {
                                                                    var i, s, r, a, u;
                                                                    return (0, o.Jh)(this, (function(c) {
                                                                        switch (c.label) {
                                                                            case 0:
                                                                                return s = (i = _e).requestAuthenticationResolveInstance, r = [{
                                                                                    member: Se,
                                                                                    sessionToken: we
                                                                                }], t ? (u = {}, [4, Me.authorizeMemberPagesBySignedInstance(be)]) : [3, 2];
                                                                            case 1:
                                                                                return u.pages = c.sent(), a = u, [3, 3];
                                                                            case 2:
                                                                                a = {}, c.label = 3;
                                                                            case 3:
                                                                                return s.apply(i, [o.pi.apply(void 0, r.concat([a]))]), Me.unRegisterToUserLogin(n), S.getCurrentPopupId() === e && S.closePopupPage(), [2]
                                                                        }
                                                                    }))
                                                                }))
                                                            }), "customAuthCbId"), [4, _e.openPopupPage(e, (function() {
                                                                Me.unRegisterToUserLogin(n)
                                                            }))];
                                                        case 1:
                                                            return a.sent(), Ae.hideDialog(), [2]
                                                    }
                                                }))
                                            }))
                                        }))]
                                    }))
                                }))
                            },
                            closeCustomAuthenticationDialogs: function(e) {
                                return void 0 === e && (e = !1), (0, o.mG)(this, void 0, void 0, (function() {
                                    var t;
                                    return (0, o.Jh)(this, (function(n) {
                                        switch (n.label) {
                                            case 0:
                                                return (t = null == S ? void 0 : S.getCurrentPopupId()) && [pe, ve].includes(t) ? (e && _e.preventCustomPopupCloseCallback(), [4, S.closePopupPage()]) : [3, 2];
                                            case 1:
                                                n.sent(), _e.allowCustomPopupCloseCallback(), n.label = 2;
                                            case 2:
                                                return [2]
                                        }
                                    }))
                                }))
                            },
                            getForgotPasswordToken: function() {
                                return new URL((0, h.yF)(d) ? r.requestUrl : location.href).searchParams.get("forgotPasswordToken")
                            },
                            shouldDisplayWelcomeDialog: function() {
                                return q && K
                            },
                            appWillMount: function() {
                                switch (new URL(r.requestUrl).searchParams.get("showDialog")) {
                                    case "MemberLoginDialog":
                                        Me.showLoginDialog();
                                        break;
                                    case "SignUpDialog":
                                        Me.showSignUpDialog();
                                        break;
                                    case "RequestPasswordResetDialog":
                                        Me.promptForgotPassword();
                                        break;
                                    case "ResetPasswordDialog":
                                        Me.showResetPasswordDialog("faketoken");
                                        break;
                                    case "WelcomeDialog":
                                        Me.showWelcomeDialog();
                                        break;
                                    case "NoPermissionsToPageDialog":
                                        Me.showNoPermissionsToPageDialog();
                                        break;
                                    case "NotificationDialog":
                                        Me.showNotificationDialog("title", "description", "ok");
                                        break;
                                    case "ConfirmationEmailDialog":
                                        Me.showConfirmationEmailDialog("fakemember")
                                }
                            },
                            pageWillUnmount: function(e) {
                                var t = e.pageId;
                                [pe, ve].includes(t) || Ae.hideDialog()
                            },
                            getSocialAuthComponentProps: function() {
                                return (0, E.IO)({
                                    config: e,
                                    viewerModel: r,
                                    sessionManager: a,
                                    handleOauthToken: Me.handleOauthToken,
                                    handleSocialLoginResponse: Me.handleSocialLoginResponse,
                                    isSocialAuthSupported: ie
                                })
                            }
                        };
                    return n.update((function() {
                        return {
                            shouldShowRenderingBlockingDialogs: function() {
                                return !(!Me.getForgotPasswordToken() && !Me.shouldDisplayWelcomeDialog())
                            },
                            showRenderingBlockingDialogs: function() {
                                var e = Me.getForgotPasswordToken();
                                return e ? Me.showResetPasswordDialog(e) : Me.shouldDisplayWelcomeDialog() ? Me.showWelcomeDialog() : void 0
                            }
                        }
                    })), Me
                })),
                R = n(59032),
                _ = n(95793),
                M = n(81600),
                O = (0, i.ff)([D.n9], (function(e) {
                    return {
                        getTpaHandlers: function() {
                            var t = this,
                                n = function(n, i, s) {
                                    return (0, o.mG)(t, void 0, Promise, (function() {
                                        var t, n, i, r;
                                        return (0, o.Jh)(this, (function(o) {
                                            switch (o.label) {
                                                case 0:
                                                    return [4, e.getMemberDetails()];
                                                case 1:
                                                    return (t = o.sent()) ? (null === (n = s.appClientSpecMapData) || void 0 === n ? void 0 : n.isWixTPA) ? [2, {
                                                        attributes: {
                                                            firstName: null !== (i = t.firstName) && void 0 !== i ? i : "",
                                                            lastName: null !== (r = t.lastName) && void 0 !== r ? r : "",
                                                            privacyStatus: t.profilePrivacyStatus
                                                        },
                                                        name: t.memberName,
                                                        email: t.loginEmail,
                                                        id: t.id,
                                                        owner: t.owner,
                                                        status: t.status
                                                    }] : [2, {
                                                        id: t.id,
                                                        owner: t.owner,
                                                        status: t.status
                                                    }] : [2, null]
                                            }
                                        }))
                                    }))
                                },
                                i = function(n, i) {
                                    return void 0 === i && (i = {}), (0, o.mG)(t, void 0, Promise, (function() {
                                        var t, n, s;
                                        return (0, o.Jh)(this, (function(o) {
                                            switch (o.label) {
                                                case 0:
                                                    return [4, e.promptLogin({
                                                        mode: i.mode,
                                                        modal: i.modal
                                                    })];
                                                case 1:
                                                    return t = o.sent().member, [2, {
                                                        attributes: {
                                                            firstName: null !== (n = t.firstName) && void 0 !== n ? n : "",
                                                            lastName: null !== (s = t.lastName) && void 0 !== s ? s : "",
                                                            privacyStatus: t.profilePrivacyStatus
                                                        },
                                                        name: t.memberName,
                                                        email: t.loginEmail,
                                                        id: t.id,
                                                        owner: t.owner,
                                                        status: t.status
                                                    }]
                                            }
                                        }))
                                    }))
                                };
                            return {
                                currentMember: n,
                                smCurrentMember: n,
                                logOutCurrentMember: (0, M.u)(["site"], (function(t, n) {
                                    e.logout(null == n ? void 0 : n.url)
                                })),
                                requestLogin: (0, M.u)(["site"], i),
                                smRequestLogin: (0, M.u)(["site"], i)
                            }
                        }
                    }
                })),
                N = (0, i.ff)([D.n9, (0, i.t6)(s.$e, D.u2), u.xP], (function(e, t, n) {
                    var i = t.componentIds;
                    return {
                        pageWillMount: function() {
                            return (0, o.mG)(this, void 0, void 0, (function() {
                                var t;
                                return (0, o.Jh)(this, (function(s) {
                                    return t = i.reduce((function(t, n) {
                                        var i, s = e.getSocialAuthComponentProps();
                                        return (0, o.pi)((0, o.pi)({}, t), ((i = {})[n] = s, i))
                                    }), {}), n.update(t), [2]
                                }))
                            }))
                        }
                    }
                })),
                U = (0, i.ff)([(0, i.t6)(s.Wf, D.u2)], (function(e) {
                    return {
                        handle: function(t) {
                            return (0, o.mG)(void 0, void 0, void 0, (function() {
                                var n, i, s;
                                return (0, o.Jh)(this, (function(o) {
                                    return n = e.get(), i = n.shouldShowRenderingBlockingDialogs, s = n.showRenderingBlockingDialogs, i() ? (s(), [2, null]) : [2, t]
                                }))
                            }))
                        }
                    }
                })),
                G = function(e) {
                    e(D.n9, R.j.AppWillMountHandler, R.j.AppDidMountHandler).to(A), e(v.BD.BlockingDialogs).to(U)
                },
                J = function(e) {
                    e(_.g).to(O), e(R.j.PageWillMountHandler).to(N), e(R.j.PageWillUnmountHandler).to((0, i.ff)([D.n9], (function(e) {
                        return {
                            pageWillUnmount: function(t) {
                                return e.pageWillUnmount(t)
                            }
                        }
                    })))
                }
        }
    }
]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/siteMembers.6ca5189a.chunk.min.js.map