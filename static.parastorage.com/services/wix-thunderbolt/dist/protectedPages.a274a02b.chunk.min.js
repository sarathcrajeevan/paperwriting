(self.webpackJsonp__wix_thunderbolt_app = self.webpackJsonp__wix_thunderbolt_app || []).push([
    [66], {
        4308: function(e, t, n) {
            "use strict";
            n.r(t), n.d(t, {
                page: function() {
                    return N
                },
                site: function() {
                    return w
                }
            });
            var r, i = n(31191),
                a = n(43757),
                u = n(61049),
                o = n(77747);
            ! function(e) {
                e.SM = "SM", e.Pass = "PASS", e.NONE = "NONE"
            }(r || (r = {}));
            var s = (0, a.ff)([(0, a.t6)(u.jC, o.u), (0, a.t6)(u.R9, o.u), (0, a.t6)(u.Wf, o.u)], (function(e, t, n) {
                    return {
                        handle: function(a) {
                            return (0, i.mG)(this, void 0, void 0, (function() {
                                var u, o, s, c, p;
                                return (0, i.Jh)(this, (function(d) {
                                    return a.pageJsonFileName ? [2, a] : (u = a.pageId, o = n.get(), s = o.pagesMap, c = o.loginAndNavigate, s[u] ? [2, (0, i.pi)((0, i.pi)({}, a), {
                                        pageJsonFileName: s[u]
                                    })] : (p = function(n) {
                                        var i = e.pagesSecurity[n];
                                        return i && i.requireLogin ? r.SM : t.passwordProtected[n] || i && i.passwordDigest ? r.Pass : r.NONE
                                    }(u), p === r.NONE && function(e, t) {
                                        throw new Error("we do not have authentication info for protected page " + e + " page security: " + t)
                                    }(u, e.pagesSecurity[u]), c(a, p), [2, null]))
                                }))
                            }))
                        }
                    }
                })),
                c = n(19238),
                p = n(95848),
                d = n(2811),
                g = n(27531),
                f = n(26513),
                h = n(5096),
                v = n(82627),
                l = (0, a.ff)([(0, a.t6)(u.Wf, o.u), (0, a.t6)(u.R9, o.u), (0, a.t6)(u.jC, o.u), c.F0, f.jj, (0, a.jt)(d.n9), (0, a.jt)(g.RC), h.EE, v.O], (function(e, t, n, a, u, o, s, c, d) {
                    var g = t.publicPageIds,
                        f = n.customNoPermissionsPageUrl,
                        h = n.customNoPermissionsPageId,
                        v = function(e) {
                            return (0, i.mG)(void 0, void 0, void 0, (function() {
                                return (0, i.Jh)(this, (function(t) {
                                    return s ? [2, s.promptPasswordDialog(e)] : [2, {
                                        authorizedPagesMap: {}
                                    }]
                                }))
                            }))
                        },
                        l = function(e, t) {
                            return (0, i.mG)(void 0, void 0, Promise, (function() {
                                return (0, i.Jh)(this, (function(n) {
                                    return [2, e === r.SM ? (0, i.mG)(void 0, void 0, void 0, (function() {
                                        var e, t;
                                        return (0, i.Jh)(this, (function(n) {
                                            switch (n.label) {
                                                case 0:
                                                    return o ? d["specs.thunderbolt.newAuthorizedPagesFlow"] ? [4, o.requestAuthorizedPages()] : [3, 2] : [3, 5];
                                                case 1:
                                                    return (e = n.sent()).success ? [2, {
                                                        authorizedPagesMap: e.pages
                                                    }] : [3, 5];
                                                case 2:
                                                    return [4, o.requestAuthentication({})];
                                                case 3:
                                                    return (e = n.sent()).success ? (t = {}, [4, o.authorizeMemberPagesByToken(e.token)]) : [3, 5];
                                                case 4:
                                                    return [2, (t.authorizedPagesMap = n.sent(), t)];
                                                case 5:
                                                    return [2, {
                                                        authorizedPagesMap: {},
                                                        authenticationResult: e
                                                    }]
                                            }
                                        }))
                                    })) : v(t)]
                                }))
                            }))
                        },
                        P = function(e, t, n) {
                            return void 0 === n && (n = !1), (0, i.mG)(void 0, void 0, Promise, (function() {
                                var r;
                                return (0, i.Jh)(this, (function(i) {
                                    return f && n ? [2, a.navigate(f + '?appSectionParams={"restrictedPageId":"' + e + '"}')] : o && "SM" === t ? (r = function() {
                                        u.isLandingOnProtectedPage() && a.navigate("./")
                                    }, o.showNoPermissionsToPageDialog(r), [2, !1]) : [2, !!u.isLandingOnProtectedPage() && a.navigate("./")]
                                }))
                            }))
                        },
                        m = function(t, n) {
                            return (0, i.mG)(void 0, void 0, void 0, (function() {
                                var r, o, s, d, f, v, m;
                                return (0, i.Jh)(this, (function(M) {
                                    switch (M.label) {
                                        case 0:
                                            r = t.pageId, M.label = 1;
                                        case 1:
                                            return M.trys.push([1, 3, , 4]), [4, l(n, r)];
                                        case 2:
                                            return o = M.sent(), s = o.authorizedPagesMap, d = o.authenticationResult, e.update((function(e) {
                                                return (0, i.pi)((0, i.pi)({}, e), {
                                                    pagesMap: Object.assign(e.pagesMap, s)
                                                })
                                            })), (null == d ? void 0 : d.reason) === p.$9.CANCELED ? [2, !!u.isLandingOnProtectedPage() && a.navigate("./")] : s[r] ? [2, a.navigate(t.parsedUrl.href)] : (f = g.includes(h), v = !!s[h], [2, P(r, n, f || v)]);
                                        case 3:
                                            return m = M.sent(), c.captureError(m, {
                                                tags: {
                                                    feature: "protectedPage"
                                                }
                                            }), [2, P(r, n)];
                                        case 4:
                                            return [2]
                                    }
                                }))
                            }))
                        };
                    return e.update((function() {
                        return {
                            loginAndNavigate: m,
                            pagesMap: {}
                        }
                    })), {
                        appWillMount: function() {
                            return (0, i.mG)(void 0, void 0, void 0, (function() {
                                return (0, i.Jh)(this, (function(e) {
                                    return [2]
                                }))
                            }))
                        }
                    }
                })),
                P = n(59032),
                m = n(95793),
                M = (0, a.ff)([(0, a.t6)(u.Wf, o.u), d.n9], (function(e, t) {
                    return {
                        getTpaHandlers: function() {
                            var n = this;
                            return {
                                authorizeMemberPages: function() {
                                    return (0, i.mG)(n, void 0, Promise, (function() {
                                        var n;
                                        return (0, i.Jh)(this, (function(r) {
                                            switch (r.label) {
                                                case 0:
                                                    return [4, t.authorizeMemberPagesByCookie()];
                                                case 1:
                                                    return n = r.sent(), e.update((function(e) {
                                                        return (0, i.pi)((0, i.pi)({}, e), {
                                                            pagesMap: (0, i.pi)((0, i.pi)({}, e.pagesMap), n)
                                                        })
                                                    })), [2]
                                            }
                                        }))
                                    }))
                                }
                            }
                        }
                    }
                })),
                w = function(e) {
                    e(c.BD.Protected).to(s), e(P.j.AppWillMountHandler).to(l)
                },
                N = function(e) {
                    e(m.g).to(M)
                }
        }
    }
]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/protectedPages.a274a02b.chunk.min.js.map